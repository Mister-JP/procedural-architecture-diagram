:root {
  --bg-0: #070e1b;
  --bg-1: #0f1d33;
  --bg-2: #112744;
  --panel-bg: rgba(8, 16, 30, 0.9);
  --panel-border: rgba(146, 214, 255, 0.4);
  --panel-shadow: 0 18px 36px rgba(0, 0, 0, 0.35);
  --text-main: #e6f7ff;
  --text-muted: #95b9cc;
  --accent: #2ab8ff;
  --accent-strong: #0a7bb4;
  --danger: #ff8b7f;
  --button-bg: #16314f;
  --button-bg-hover: #1f4167;
  --button-bg-active: #26598d;
  --field-bg: rgba(16, 35, 58, 0.88);
}

html,
body {
  margin: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  color: var(--text-main);
  font-family: "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  background: radial-gradient(circle at 20% 15%, var(--bg-2), var(--bg-1) 45%, var(--bg-0) 100%);
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: linear-gradient(rgba(138, 201, 238, 0.07) 1px, transparent 1px),
    linear-gradient(90deg, rgba(138, 201, 238, 0.07) 1px, transparent 1px);
  background-size: 28px 28px;
  mask-image: radial-gradient(circle at 35% 20%, black, transparent 72%);
}

canvas {
  display: block;
}

.left-dock,
.right-dock {
  position: fixed;
  top: 14px;
  z-index: 30;
  pointer-events: none;
}

.left-dock {
  left: 14px;
}

.right-dock {
  right: 14px;
}

.tool-panel,
.inspector-panel {
  pointer-events: auto;
  width: min(340px, calc(100vw - 28px));
  max-height: calc(100vh - 28px);
  overflow: auto;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid var(--panel-border);
  background: var(--panel-bg);
  backdrop-filter: blur(6px);
  box-shadow: var(--panel-shadow);
  transition: transform 0.24s ease, opacity 0.24s ease;
}

.tool-panel.panel-hidden {
  transform: translateX(calc(-100% - 20px));
  opacity: 0;
  pointer-events: none;
}

.inspector-panel.panel-hidden {
  transform: translateX(calc(100% + 20px));
  opacity: 0;
  pointer-events: none;
}

.panel-show-button {
  pointer-events: auto;
  appearance: none;
  border: 1px solid rgba(186, 236, 255, 0.72);
  border-radius: 10px;
  padding: 8px 12px;
  color: var(--text-main);
  background: rgba(17, 46, 75, 0.92);
  font: 700 12px/1 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  letter-spacing: 0.3px;
  cursor: pointer;
}

.panel-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.header-stack {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.panel-title {
  margin: 0;
  font: 800 15px/1.2 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  letter-spacing: 0.45px;
  text-transform: uppercase;
}

.panel-subtitle {
  margin: 0;
  color: var(--text-muted);
  font: 600 11px/1.3 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
}

.panel-toggle {
  appearance: none;
  border: 1px solid rgba(191, 232, 255, 0.66);
  border-radius: 8px;
  padding: 6px 10px;
  color: var(--text-main);
  background: rgba(15, 45, 73, 0.94);
  font: 700 11px/1 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  cursor: pointer;
}

.panel-section {
  margin: 6px 0 10px;
  padding: 8px;
  border-radius: 10px;
  border: 1px solid rgba(131, 199, 237, 0.26);
  background: rgba(14, 32, 53, 0.7);
}

.tool-button,
.field-action {
  appearance: none;
  border: 1px solid rgba(180, 229, 255, 0.6);
  border-radius: 9px;
  padding: 9px 11px;
  margin-bottom: 7px;
  width: 100%;
  color: var(--text-main);
  background: var(--button-bg);
  font: 700 12px/1.1 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  letter-spacing: 0.18px;
  cursor: pointer;
  transition: background 0.16s ease;
}

.tool-button:hover,
.field-action:hover {
  background: var(--button-bg-hover);
}

.tool-button:disabled {
  opacity: 0.38;
  cursor: not-allowed;
}

.tool-button.compact {
  margin-bottom: 0;
}

.tool-button.full-row {
  grid-column: 1 / -1;
}

.tool-button.active {
  background: var(--button-bg-active);
  border-color: rgba(151, 225, 255, 0.9);
}

.button-row {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
  margin: 8px 0;
}

.panel-help {
  margin: 8px 2px 0;
  color: var(--text-muted);
  font: 600 11px/1.35 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
}

.preview-container {
  margin-bottom: 10px;
  border: 1px solid rgba(134, 204, 243, 0.32);
  border-radius: 10px;
  padding: 8px;
  background: rgba(11, 27, 45, 0.72);
}

.preview-label {
  margin: 0 0 6px;
  color: var(--text-muted);
  font: 700 11px/1 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  letter-spacing: 0.4px;
  text-transform: uppercase;
}

.preview-viewport {
  width: 100%;
  height: 180px;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(113, 182, 222, 0.28);
  background: radial-gradient(circle at 35% 24%, #142743, #0c1628 82%);
}

.inspector-fields {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.section-title {
  margin: 6px 0 4px;
  color: #cceeff;
  font: 700 11px/1.2 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  letter-spacing: 0.35px;
  text-transform: uppercase;
}

.field-row {
  display: grid;
  grid-template-columns: 112px minmax(0, 1fr);
  align-items: center;
  gap: 8px;
}

.field-label {
  color: #c2e2f1;
  font: 600 12px/1.15 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
}

.toggle-row input[type="checkbox"] {
  justify-self: start;
  width: 16px;
  height: 16px;
  margin: 0;
  accent-color: var(--accent);
}

.field-input {
  min-height: 31px;
  border: 1px solid rgba(167, 219, 247, 0.55);
  border-radius: 7px;
  padding: 5px 8px;
  color: #eaf8ff;
  background: var(--field-bg);
  font: 700 12px/1 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
}

.field-input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(42, 184, 255, 0.2);
}

.export-resolution-controls {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto minmax(0, 1fr);
  align-items: center;
  gap: 6px;
}

.export-resolution-separator {
  color: #9ec8df;
  font: 700 11px/1 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
}

.export-region-controls {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 6px;
}

.export-region-status {
  grid-column: 1 / -1;
  margin: 0;
  color: var(--text-muted);
  font: 600 11px/1.3 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
}

.export-selection-overlay {
  position: fixed;
  inset: 0;
  z-index: 26;
  pointer-events: none;
}

.export-selection-overlay.active {
  pointer-events: auto;
  cursor: crosshair;
}

.export-selection-overlay.active::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(8, 18, 33, 0.18);
}

.export-selection-box {
  position: fixed;
  border: 2px solid rgba(255, 226, 153, 0.95);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.65);
  background: rgba(255, 226, 153, 0.08);
  pointer-events: none;
  z-index: 1;
}

.export-selection-hint {
  position: fixed;
  left: 50%;
  bottom: 24px;
  transform: translateX(-50%);
  margin: 0;
  padding: 8px 12px;
  border: 1px solid rgba(171, 226, 255, 0.65);
  border-radius: 9px;
  color: #d8f2ff;
  background: rgba(8, 26, 44, 0.93);
  font: 700 11px/1.2 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  letter-spacing: 0.2px;
  pointer-events: none;
  z-index: 2;
}

.color-input {
  padding: 2px;
  min-width: 48px;
}

.range-row {
  grid-template-columns: 112px minmax(0, 1fr) auto;
}

.range-input {
  padding: 0;
}

.range-value {
  color: #9ec8df;
  min-width: 52px;
  text-align: right;
  font: 700 11px/1 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
}

.curve-status {
  margin: 0 0 8px;
  color: #ffe08d;
  font: 700 11px/1.25 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
}

.inspector-action {
  margin-top: 12px;
  margin-bottom: 0;
  background: #185788;
}

.inspector-action.create-action {
  background: var(--accent-strong);
}

.inspector-action:hover {
  background: #1d6ea8;
}

.inspector-delete {
  margin-top: 8px;
  margin-bottom: 0;
  border-color: rgba(255, 166, 156, 0.7);
  background: rgba(108, 32, 27, 0.92);
}

.inspector-delete:hover {
  background: rgba(132, 40, 34, 0.95);
}

.view-gizmo {
  position: fixed;
  left: 18px;
  bottom: 18px;
  z-index: 35;
  width: min(214px, calc(100vw - 36px));
  border: 1px solid rgba(166, 223, 255, 0.52);
  border-radius: 12px;
  padding: 10px;
  background: rgba(10, 24, 43, 0.9);
  backdrop-filter: blur(6px);
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.3);
}

.view-gizmo-header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 8px;
}

.view-gizmo-title {
  margin: 0;
  color: #d8f2ff;
  font: 800 11px/1 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  letter-spacing: 0.38px;
  text-transform: uppercase;
}

.view-gizmo-status {
  margin: 0;
  color: #8fc7df;
  font: 700 11px/1 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
}

.view-gizmo-row {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 6px;
  margin-bottom: 6px;
}

.view-gizmo-button {
  appearance: none;
  border: 1px solid rgba(173, 228, 255, 0.58);
  border-radius: 8px;
  min-height: 30px;
  color: var(--text-main);
  background: rgba(19, 49, 78, 0.94);
  font: 700 11px/1 "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  letter-spacing: 0.24px;
  cursor: pointer;
  transition: background 0.16s ease;
}

.view-gizmo-button:hover {
  background: rgba(31, 69, 107, 0.95);
}

.view-gizmo-button.active {
  border-color: rgba(255, 226, 153, 0.95);
  background: rgba(128, 89, 32, 0.95);
}

.view-gizmo-button-accent {
  width: 100%;
  margin-top: 2px;
  background: rgba(13, 95, 139, 0.92);
}

.view-gizmo-button-accent:hover {
  background: rgba(19, 113, 163, 0.95);
}

@media (max-width: 900px) {
  .left-dock,
  .right-dock {
    top: 10px;
  }

  .left-dock {
    left: 10px;
  }

  .right-dock {
    right: 10px;
  }

  .tool-panel,
  .inspector-panel {
    width: min(320px, calc(100vw - 20px));
    max-height: calc(100vh - 20px);
  }

  .view-gizmo {
    left: 10px;
    bottom: 10px;
    width: min(206px, calc(100vw - 20px));
  }
}

@media (max-width: 700px) {
  .tool-panel,
  .inspector-panel {
    width: min(290px, calc(100vw - 20px));
  }

  .field-row,
  .range-row {
    grid-template-columns: 1fr;
  }

  .range-value {
    text-align: left;
  }

  .button-row {
    grid-template-columns: 1fr;
  }
}
